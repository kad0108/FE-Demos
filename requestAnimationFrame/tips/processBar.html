<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>progress bar</title>
	<style>
		#test{
			width: 1px;
			height: 30px;
			line-height: 30px;
			background-color: lightblue;
		}
	</style>
</head>
<body>
	<p id="test">0%</p>
	<button type="button" id="run">run</button>
	<script src = "../../base.js"></script>
	<script>
		window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;

		var bar = $("test");
		var cot = 1;
		var main = function(){
			if(cot < 100){
				cot += 1;
				bar.style.width = cot + '%';
				bar.innerHTML = cot + '%';
				requestAnimationFrame(main);
			}
		}

		addEvent($("run"), "click", function(){
			bar.style.width = "1px";
			bar.innerHTML = "0%";
			cot = 1;
			main();
		});

		// window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
		// var start = null;
		// var ele = document.getElementById("test");
		// var progress = 0;

		// function step(timestamp) {
		//     progress += 1;
		//     ele.style.width = progress + "%";
		//     ele.innerHTML=progress + "%";
		//     if (progress < 100) {
		//         requestAnimationFrame(step);
		//     }
		// }
		// requestAnimationFrame(step);
		// document.getElementById("run").addEventListener("click", function() {
		//     ele.style.width = "1px";
		//     progress = 0;
		//     requestAnimationFrame(step);
		// }, false);
	</script>
</body>
</html>